@page "/post"
@using BlazorApp.Data
@using System.Text.Json
@using System.Text.Json.Serialization
@inject IHttpClientFactory ClientFactory
@inject HttpClient Http
@inject NavigationManager Navigation

<div class="header">
    <h1>Create a Todo Item</h1>
</div>

<form class="post-form" method="post" @onsubmit="Submit">
    <div class="input-container">
        <label>Name</label>
        <InputText @bind-Value="item.Name" />
    </div>
    <div class="post-form-buttons">
        <button type="button" @onclick='() => Cancel()'>Cancel</button>
        <button type="submit">Submit</button>
    </div>
    
</form>

@code {
    private TodoItem item = new TodoItem
        {
            Name = "",
            IsComplete = false
    };

    private async void Submit()
    {
        await Http.PostAsJsonAsync<TodoItem>("https://localhost:7197/api/TodoItems/", item);
        Cancel();
    }

    private void Cancel()
    {
        Navigation.NavigateTo("/");
    }
}
